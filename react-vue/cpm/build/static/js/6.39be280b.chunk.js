(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{622:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=f(n(1)),a=f(n(268));n(725);var l=n(83),i=n(86),u=f(n(267)),s=n(111),c=n(110),p=f(n(727));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=(0,u.default)({loader:function(){return n.e(0).then(n.t.bind(null,645,7))},loading:function(){return null}}),v=(0,u.default)({loader:function(){return n.e(7).then(n.t.bind(null,740,7))},loading:function(){return null}}),S=(0,u.default)({loader:function(){return n.e(8).then(n.t.bind(null,743,7))},loading:function(){return null}}),O=(0,u.default)({loader:function(){return Promise.all([n.e(4),n.e(9)]).then(n.t.bind(null,749,7))},loading:function(){return null}}),k=(0,u.default)({loader:function(){return Promise.all([n.e(4),n.e(10)]).then(n.t.bind(null,840,7))},loading:function(){return null}}),D=o.default.createElement(a.default,null),R=o.default.createElement("div",{className:"menu-wrapper"},o.default.createElement(p.default,null)),M=o.default.createElement(E,null),_=(0,l.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}return e}({loginUser:e.userReducer,employeeModalState:e.employeeModalReducer},e.deptReducer)},{fetchUserData:s.fetchUserData,toggleModalState:c.toggleModalState})(r=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,h(t).call(this))).state={getRoleState:!0},e}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,o.default.Component),n=t,(r=[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.props.fetchUserData(),document.title=""!==this.props.loginUser.enterpriseName?this.props.loginUser.enterpriseName:""}},{key:"render",value:function(){var e=this.props.match;return o.default.createElement("div",{className:"page-container"},D,o.default.createElement("div",{className:"container-wrapper"},R,o.default.createElement("div",{className:"data-wrapper"},o.default.createElement(i.Switch,null,o.default.createElement(i.Route,{path:"".concat(e.path,"/"),exact:!0,component:"enterprise"===this.props.loginUser.userRole?v:O}),o.default.createElement(i.Route,{path:"".concat(e.path,"/eall"),component:S}),o.default.createElement(i.Route,{path:"".concat(e.path,"/capacity"),component:k})))),this.props.activePerson?M:null)}}])&&m(n.prototype,r),a&&m(n,a),t}())||r;t.default=_},644:function(e,t,n){},725:function(e,t,n){},727:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=g(n(1)),a=n(86);n(728);var l=n(109),i=g(n(730)),u=g(n(731)),s=g(n(732)),c=g(n(733)),p=g(n(734)),f=n(83),d=g(n(735)),m=g(n(736)),y=n(110),h=n(265);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=l.Menu.SubMenu,R=l.Menu.Item,M=l.Menu.ItemGroup,_=o.default.createElement("span",null,o.default.createElement("img",{alt:"",className:"icon",src:c.default}),"\u90e8\u95e8\u7ba1\u7406"),w=o.default.createElement(a.Link,{to:"/manage/eall"},o.default.createElement("img",{alt:"",className:"mr6",src:u.default}),"\u4eba\u5458\u7ba1\u7406"),C=o.default.createElement(a.Link,{to:"/manage/capacity"},o.default.createElement("img",{alt:"",className:"mr6",src:s.default}),"\u5bb9\u91cf\u7ba1\u7406"),P=o.default.createElement("div",{className:"menu-dark"}),j=o.default.createElement("img",{alt:"",src:i.default}),T=o.default.createElement("img",{alt:"",src:p.default}),A=o.default.createElement("span",null,o.default.createElement("img",{alt:"",className:"icon",src:c.default}),"\u90e8\u95e8\u7ba1\u7406"),N=o.default.createElement("div",null,"\u6682\u65e0\u4efb\u4f55\u90e8\u95e8"),L=o.default.createElement(d.default,null),I=o.default.createElement(m.default,{trType:"ENTERPRISE_MANAGER",mtitle:"\u79fb\u4ea4\u4f01\u4e1a\u7ba1\u7406\u5458\u6743\u9650"}),U=(0,f.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){k(e,t,n[t])})}return e}({loginUser:e.userReducer},e.deptReducer,{employeeModalState:e.employeeModalReducer})},{getDeptList:h.getDeptList,toggleModalState:y.toggleModalState,setCurrentDept:h.setCurrentDept})(r=(0,a.withRouter)(r=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=v(t).call(this,e))||"object"!==b(o)&&"function"!==typeof o?O(r):o).state={cdAnddlbool:!1,menuSelectedKeys:"",menuOpenKeys:""},n.createDept=n.createDept.bind(O(O(n))),n.rightTransfer=n.rightTransfer.bind(O(O(n))),n.selectDept=n.selectDept.bind(O(O(n))),n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,o.default.Component),n=t,(r=[{key:"selectDept",value:function(e){if("depts"===e.key)""===this.state.menuOpenKeys||this.state.menuOpenKeys.indexOf("deptless")>-1?this.setState({menuOpenKeys:"depts"}):this.setState({menuOpenKeys:""});else if(-1===e.key.indexOf("deptless")){var t=this.props.deptList.filter(function(t){return e.key==t.departmentId});this.props.setCurrentDept(t[0]),this.setState({menuOpenKeys:"depts"})}else this.setState({menuSelectedKeys:e.key}),this.setState({menuOpenKeys:e.key})}},{key:"componentDidMount",value:function(){this.props.deptList||""===this.props.loginUser.userRole||this.props.getDeptList({type:this.props.loginUser.userRole})}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;this.setState({cdAnddlbool:null!==e.deptList&&e.deptList.length>0&&null!==e.currentDept}),""===t.loginUser.userRole&&""!==e.loginUser.userRole&&t.getDeptList({type:e.loginUser.userRole}),!t.currentDept&&e.currentDept?(this.setState({menuSelectedKeys:e.currentDept.departmentId+""}),e.setCurrentDept(e.currentDept),this.setState({menuOpenKeys:"depts"})):t.currentDept&&e.currentDept&&t.currentDept.departmentId!==e.currentDept.departmentId?(this.setState({menuSelectedKeys:e.currentDept.departmentId+""}),e.setCurrentDept(e.currentDept)):!e.currentDept&&e.deptList&&e.deptList.length>0&&(this.setState({menuSelectedKeys:e.deptList[0].departmentId+""}),e.setCurrentDept(e.deptList[0]),this.setState({cdAnddlbool:!0}),this.setState({menuOpenKeys:"depts"})),t.deptList&&t.deptList.length!==e.deptList.length&&e.deptList.length>0&&(this.setState({menuSelectedKeys:e.deptList[0].departmentId+""}),e.setCurrentDept(e.deptList[0]))}},{key:"createDept",value:function(){this.props.toggleModalState("CREATE_DEPT",!0)}},{key:"rightTransfer",value:function(){this.props.toggleModalState("TRANSFER_B_RIGHT",!0)}},{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"menubar"},o.default.createElement("div",{className:"role"},"department"===this.props.loginUser.userRole?"\u90e8\u95e8\u7ba1\u7406":"\u4f01\u4e1a\u7ba1\u7406"),"enterprise"===this.props.loginUser.userRole?o.default.createElement("div",null,o.default.createElement(l.Menu,{mode:"inline",theme:"light",openKeys:[this.state.menuOpenKeys],selectedKeys:[this.state.menuSelectedKeys]},this.state.cdAnddlbool?o.default.createElement(D,{onTitleClick:function(t){return e.selectDept(t)},key:"depts",title:_},o.default.createElement(M,{key:"d1"},this.props.deptList.map(function(t,n){return o.default.createElement(R,{onClick:function(t){return e.selectDept(t)},key:t.departmentId},o.default.createElement(a.Link,{to:{pathname:"/manage"}},t.name))}))):null,o.default.createElement(R,{onClick:function(t){return e.selectDept(t)},key:"deptless-1"},w),o.default.createElement(R,{onClick:function(t){return e.selectDept(t)},key:"deptless-2"},C)),P,o.default.createElement("div",{className:"menu-btns"},o.default.createElement("li",{onClick:this.createDept,className:"btn cp"},j,"\u521b\u5efa\u90e8\u95e8"),o.default.createElement("li",{onClick:this.rightTransfer,className:"btn cp"},T,"\u6743\u9650\u79fb\u4ea4"))):this.state.cdAnddlbool?o.default.createElement(l.Menu,{mode:"inline",theme:"light",openKeys:[this.state.menuOpenKeys],selectedKeys:[this.state.menuSelectedKeys]},o.default.createElement(D,{key:"depts",title:A},o.default.createElement(M,{key:"d1"},this.props.deptList.map(function(t,n){return o.default.createElement(R,{onClick:function(t){return e.selectDept(t)},key:t.departmentId},t.name)})))):N,this.props.employeeModalState.createDeptModalVisible?L:null,this.props.employeeModalState.transferBRightModalVisible?I:null)}}])&&E(n.prototype,r),i&&E(n,i),t}())||r)||r;t.default=U},728:function(e,t,n){},730:function(e,t,n){e.exports=n.p+"static/media/add-icon.853e7eb1.svg"},731:function(e,t,n){e.exports=n.p+"static/media/staff-icon.5595ae7b.svg"},732:function(e,t,n){e.exports=n.p+"static/media/capacity-icon.51298928.svg"},733:function(e,t,n){e.exports=n.p+"static/media/dept-icon.07249125.svg"},734:function(e,t,n){e.exports=n.p+"static/media/mv-user-icon.005e4a75.svg"},735:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=c(n(1)),a=n(109),l=n(83),i=c(n(84)),u=n(110),s=n(265);function c(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=(0,l.connect)(function(e){return{loginUser:e.userReducer}},{toggleModalState:u.toggleModalState,getDeptList:s.getDeptList})(r=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=d(t).call(this,e))||"object"!==p(o)&&"function"!==typeof o?y(r):o).state={deptname:""},n.handleOk=n.handleOk.bind(y(y(n))),n.handleCancel=n.handleCancel.bind(y(y(n))),n.createDept=n.createDept.bind(y(y(n))),n}var n,r,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o.default.Component),n=t,(r=[{key:"handleOk",value:function(){this.state.deptname.length>0&&this.createDept()}},{key:"createDept",value:function(){var e=this;i.default.post("enterprise/depts/create",{parentId:"0",deptName:this.state.deptname}).then(function(t){t&&200===t.status&&(a.Modal.success({title:"\u7cfb\u7edf\u63d0\u793a",centered:!0,content:"\u521b\u5efa\u6210\u529f\uff01"}),e.props.toggleModalState("DEFAULT",!1),e.props.getDeptList({type:e.props.loginUser.userRole}))})}},{key:"handleCancel",value:function(){this.props.toggleModalState("DEFAULT",!1)}},{key:"render",value:function(){var e=this;return o.default.createElement(a.Modal,{width:300,visible:!0,title:"\u521b\u5efa\u90e8\u95e8",centered:!0,onCancel:this.handleCancel,footer:[o.default.createElement(a.Button,{key:"1",onClick:this.handleCancel},"\u53d6\u6d88"),o.default.createElement(a.Button,{key:"2",type:"primary",onClick:this.handleOk},"\u786e\u8ba4")]},o.default.createElement(a.Input,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0",onChange:function(t){return e.setState({deptname:t.target.value})}}))}}])&&f(n.prototype,r),l&&f(n,l),t}())||r;t.default=h},736:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=p(n(1)),a=n(109),l=n(83),i=p(n(84)),u=n(85),s=n(110),c=n(264);function p(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n(644),a.message.config({top:99});var g=o.default.createElement("div",{className:"tc"},"\u6682\u65e0\u8bb0\u5f55"),b=(0,l.connect)(function(e){return{loginUser:e.userReducer,mEmployee:e.staffReducer.mEmployee,currentDept:e.deptReducer.currentDept}},{toggleModalState:s.toggleModalState,getMEL:c.getMEL})(r=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=m(t).call(this,e))||"object"!==f(o)&&"function"!==typeof o?h(r):o).state={isAllocation:"",limit:2,page:1,employeeArray:[],lastPage:!1,total:0,selectedUserArray:[],userId:""},n.handleOk=n.handleOk.bind(h(h(n))),n.handleCancel=n.handleCancel.bind(h(h(n))),n.transferRight=n.transferRight.bind(h(h(n))),n.onChange=n.onChange.bind(h(h(n))),n.getMore=n.getMore.bind(h(h(n))),n.changgeSort=n.changgeSort.bind(h(h(n))),n}var n,r,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,o.default.Component),n=t,(r=[{key:"componentDidMount",value:function(){"DEPT_DIRECTOR"===this.props.trType?this.getEmployee(null):"ENTERPRISE_MANAGER"===this.props.trType&&this.getEmployee(null)}},{key:"getEmployee",value:function(e){this.props.getMEL(e)}},{key:"handleOk",value:function(){this.state.userId==this.props.loginUser.id?a.message.error("\u5f53\u524d\u7528\u6237\u5df2\u7ecf\u662f\u4f01\u4e1a\u7ba1\u7406\u5458"):""!==this.state.userId?this.transferRight():a.message.error("\u8bf7\u5148\u9009\u62e9\u5458\u5de5")}},{key:"transferRight",value:function(){var e=this,t={userId:this.state.userId,moveUserId:this.props.loginUser.id,moveType:"0",moveDeptId:"0"};i.default.post("enterprise/admin/move/power",t).then(function(t){t&&200===t.status&&(e.props.toggleModalState("DEFAULT",!1),a.Modal.success({title:"\u7cfb\u7edf\u63d0\u793a",centered:!0,content:"\u79fb\u4ea4\u6210\u529f\uff01\u5373\u5c06\u8fd4\u56de\u5b98\u7f51\u9996\u9875"}),setTimeout(function(){(0,u.authTimeout)()},3e3))})}},{key:"getMore",value:function(){this.state.lastPage||this.getEmployee({page:this.state.page+1,isAllocation:this.state.isAllocation})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;"DEPT_DIRECTOR"===this.props.trType?this.propsChange(t,e):"ENTERPRISE_MANAGER"===this.props.trType&&this.propsChange(t,e)}},{key:"propsChange",value:function(e,t){if(!e.mEmployee&&t.mEmployee&&t.mEmployee.object&&t.mEmployee.object.length>0){console.log("\u7b2c\u4e00\u6b21\u52a0\u8f7d\u6570\u636e");var n=this.state.employeeArray.concat(t.mEmployee.object);this.setState({employeeArray:n,page:t.mEmployee.currentPage,total:t.mEmployee.total,lastPage:n.length===t.mEmployee.total})}else if(e.mEmployee&&t.mEmployee&&t.mEmployee.object&&t.mEmployee.object.length>0){console.log("\u70b9\u51fb\u52a0\u8f7d\u66f4\u591a");var r=this.state.employeeArray.concat(t.mEmployee.object);this.setState({employeeArray:r,page:t.mEmployee.currentPage,total:t.mEmployee.total,lastPage:r.length===t.mEmployee.total})}else t.mEmployee&&0===t.mEmployee.total&&(console.log("\u52a0\u8f7d\u5b8c\u6240\u6709\u6570\u636e"),this.setState({employeeArray:[],page:1,total:0,lastPage:!0}))}},{key:"changgeSort",value:function(e){this.setState({isAllocation:e,limit:30,page:1,employeeArray:[],lastPage:!1}),this.getEmployee({isAllocation:e})}},{key:"onChange",value:function(e){this.setState({userId:e.target.value})}},{key:"handleCancel",value:function(){this.props.toggleModalState("DEFAULT",!1)}},{key:"render",value:function(){var e=this,t=this.state.employeeArray.map(function(e){var t=e.userRoleInfos.some(function(e){return"ENTERPRISE_MANAGER"===e.roleName});return e.isEM=!!t,e});return o.default.createElement(a.Modal,{width:300,visible:!0,title:this.props.mtitle?this.props.mtitle:"\u6743\u9650\u79fb\u4ea4",centered:!0,onCancel:this.handleCancel,footer:[o.default.createElement(a.Button,{key:"1",onClick:this.handleCancel},"\u53d6\u6d88"),o.default.createElement(a.Button,{key:"2",type:"primary",onClick:this.handleOk},"\u786e\u8ba4")]},o.default.createElement("div",{className:"add-staff-modal"},o.default.createElement("div",{className:"sort cp"},o.default.createElement("div",{onClick:function(){return e.changgeSort("")},className:""===this.state.isAllocation?"active":""},"\u6240\u6709\u6210\u5458"),o.default.createElement("div",{onClick:function(){return e.changgeSort("-1")},className:"-1"===this.state.isAllocation?"active":""},"\u5f85\u5206\u914d")),o.default.createElement("div",{className:"radio-wrapper"},o.default.createElement(a.Radio.Group,{style:{width:"100%"},onChange:this.onChange},t.length>0?t.map(function(e){return e.isEM?null:o.default.createElement("div",{className:"radio-class",key:e.userId},o.default.createElement(a.Radio,{value:e.userId},e.name))}):null),0===this.state.total?g:this.state.lastPage?null:o.default.createElement("div",{className:"cp theme-color tc",onClick:this.getMore},"\u52a0\u8f7d\u66f4\u591a"))))}}])&&d(n.prototype,r),l&&d(n,l),t}())||r;t.default=b}}]);
//# sourceMappingURL=6.39be280b.chunk.js.map
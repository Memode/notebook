{"version":3,"sources":["components/datagrid/datagrid.js","static/images/empty-icon.svg","static/images/filter-icon.svg","container/employeeall/employee.js","static/images/company-icon.svg","static/images/appoint-icon.svg","static/images/delete-icon.svg"],"names":["__webpack_require__","_antd","_reactRedux","_staffReducer","_react2","default","createElement","alt","src","emptyIcon","Datagrid","connect","state","employeese","staffReducer","staffData","object","selectedStaffList","togglePersonal","selectedStaff","React","Component","np","_this","this","emptyStyle","height","concat","props","tscale","display","alignItems","justifyContent","empty","style","_ref","rowSelection","selectedRowKeys","length","map","ss","key","onChange","selectRowKeys","selectRows","onSelect","record","selected","selectedRows","onSelectAll","isSlectedAll","changeRows","Table","calSelect","columns","tableHead","onRow","onClick","ap","filter","e","userId","onMouseEnter","size","tableSize","title","customHeader","locale","emptyText","pagination","rowClassName","className","dataSource","sourceData","scroll","y","module","exports","p","_common","_employeeModalReducer","Personal","_reactLoadable2","loader","then","t","bind","loading","SDDModal","DSModal","SBMModal","RDMModal","Appointmodal","companyIcon","Button","filterIcon","Icon","type","appointIcon","Employee","loginUser","userReducer","enterpriseTotal","employeeModalState","employeeModalReducer","deptList","deptReducer","toggleModalState","getStaffList","_classCallCheck","_getPrototypeOf","call","isAllocation","page","limit","searchName","deptId","sbmbool","getEmployees","_assertThisInitialized","staffDetail","appoint","filterEm","delStaff","searchHandler","emitEmptySearchName","toggleDeptManage","toggleBusManage","ah","window","screen","availHeight","setState","scale","target","obj","trim","params","Object","assign","indexOf","bool","w","_this2","filterPop","tHead","dataIndex","render","text","pageData","employee","bitPop","departments","d","i","name","userRoleInfos","some","r","roleName","id","Avatar","getAvatar","cloudUserId","Popover","placement","content","fontSize","dept","phone","mobile","email","enterpriseName","_ref2","Input","prefix","_ref3","placeholder","suffix","value","onPressEnter","_ref4","_datagrid2","total","Pagination","defaultCurrent","currentPage","showTotal","paginationTotal","pageChange","staffDetailModalVisible","_ref5","setDeptModalVisible","_ref6","delStaffModalVisible","_ref7","setDeptManagerModalVisible","_ref8","setBusManagerModalVisible","removeDeptManagerModalVisible","_ref9"],"mappings":"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","file":"static/js/8.1400566d.chunk.js","sourcesContent":["import React from 'react'\r\nimport {Table} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport {togglePersonal,selectedStaff} from 'store/staffReducer'\r\nimport emptyIcon from 'static/images/empty-icon.svg'\r\nimport './datagrid.scss'\r\n@connect(\r\n    state=>{\r\n        return{\r\n            employeese:state.staffReducer.staffData.object,\r\n            selectedStaffList:state.staffReducer.selectedStaffList\r\n        }\r\n    },\r\n    {togglePersonal,selectedStaff}\r\n)\r\nclass Datagrid extends React.Component{\r\n    componentWillReceiveProps(np){\r\n        //console.log(np)\r\n    }\r\n    render(){\r\n        const emptyStyle={\r\n            height:`${this.props.tscale*70}vh`,\r\n            display:'flex',\r\n            alignItems:'center',\r\n            justifyContent:'center'\r\n        }\r\n        const empty=(\r\n            <div style={emptyStyle}>\r\n                <div>\r\n                    <img alt='' src={emptyIcon}/>\r\n                    <p>暂无数据</p>\r\n                </div>\r\n            </div>\r\n        )\r\n        const rowSelection={\r\n            //操作选中状态\r\n            selectedRowKeys:this.props.selectedStaffList.length>0?this.props.selectedStaffList.map(ss=>{\r\n                return ss.key\r\n            }):[],\r\n            onChange:(selectRowKeys,selectRows)=>{\r\n                //console.log(`selectRowKeys:${selectRowKeys}`,\"selectRows:\"+selectRows)\r\n            },\r\n            //record当前选中的行,selected是否选中,selectedRows所有被选中的数据\r\n            onSelect:(record,selected,selectedRows)=>{\r\n                this.props.selectedStaff(selectedRows)\r\n            },\r\n            onSelectAll:(isSlectedAll,selectedRows,changeRows)=>{\r\n                this.props.selectedStaff(selectedRows)\r\n            }\r\n        }\r\n        return(<Table rowSelection={this.props.calSelect?rowSelection:null} columns={this.props.tableHead} \r\n            onRow={(record) => {\r\n                return {\r\n                  onClick: () => {\r\n                      let ap=this.props.employeese.filter(e=>{\r\n                          return e.userId===record.key\r\n                      })\r\n                      //查看员工详情，插入当前选中的员工记录\r\n                      this.props.togglePersonal(ap[0])\r\n                  },\r\n                  onMouseEnter: () => {}\r\n                }\r\n            }}\r\n            size={this.props.tableSize?this.props.tableSize:'default'}\r\n            title={this.props.customHeader?this.props.customHeader:null}\r\n            locale={{emptyText: empty }} \r\n            pagination={false} rowClassName='table-row-name' className='column-name' \r\n            dataSource={this.props.sourceData} scroll={{ y: `${this.props.tscale*70}vh` }}></Table>)\r\n    }\r\n}\r\n\r\nexport default Datagrid","module.exports = __webpack_public_path__ + \"static/media/empty-icon.1e6b2481.svg\";","module.exports = __webpack_public_path__ + \"static/media/filter-icon.e4479bae.svg\";","import React from 'react'\r\nimport './employee.scss'\r\n\r\n//所有员工列表\r\nimport companyIcon from 'static/images/company-icon.svg'\r\nimport appointIcon from 'static/images/appoint-icon.svg'\r\nimport deleteIcon from 'static/images/delete-icon.svg'\r\nimport filterIcon from 'static/images/filter-icon.svg'\r\nimport Datagrid from 'components/datagrid/datagrid'\r\nimport {Icon,Button,Input,Popover,Pagination,message,Radio,Avatar} from 'antd'\r\nimport {connect} from 'react-redux'\r\n\r\nimport {paginationTotal,getAvatar} from 'libs/common'\r\nimport {toggleModalState} from 'store/employeeModalReducer'\r\nimport {getStaffList} from 'store/staffReducer'\r\nimport Loadable from 'react-loadable'\r\nconst Personal = Loadable({loader: () => import('components/personal/personal'),loading() {return null}})\r\nconst SDDModal = Loadable({loader: () => import('components/modals/sddmodal'),loading() {return null}})\r\nconst DSModal = Loadable({loader: () => import('components/modals/dsmodal'),loading() {return null}})\r\nconst SBMModal = Loadable({loader: () => import('components/modals/sbmmodal'),loading() {return null}})\r\nconst RDMModal = Loadable({loader: () => import('components/modals/rdmmodal'),loading() {return null}})\r\nconst Appointmodal = Loadable({loader: () => import('components/modals/appointmodal'),loading() {return null}})\r\n@connect(\r\n    state=>{\r\n        return{\r\n            loginUser:state.userReducer,\r\n            selectedStaffList:state.staffReducer.selectedStaffList,\r\n            employeese:state.staffReducer.staffData,\r\n            enterpriseTotal:state.staffReducer.enterpriseTotal,\r\n            employeeModalState:state.employeeModalReducer,\r\n            deptList:state.deptReducer.deptList,\r\n        }\r\n    },\r\n    {toggleModalState,getStaffList}\r\n)\r\nclass Employee extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            //表格缩放比例\r\n            tscale:1,\r\n            //请求相关参数\r\n            isAllocation:'',//已分配1未分配-1,所有''\r\n            page:1,\r\n            limit:30,\r\n            searchName:'',\r\n            deptId:0,\r\n            //设置企业管理员还是移除（true和false）\r\n            sbmbool:true\r\n        }\r\n        this.getEmployees=this.getEmployees.bind(this)\r\n        this.staffDetail=this.staffDetail.bind(this)\r\n        this.appoint=this.appoint.bind(this)\r\n        this.filterEm=this.filterEm.bind(this)\r\n        this.delStaff=this.delStaff.bind(this)\r\n        this.searchHandler=this.searchHandler.bind(this)\r\n        this.emitEmptySearchName=this.emitEmptySearchName.bind(this)\r\n        //设为移除部门主管\r\n        this.toggleDeptManage=this.toggleDeptManage.bind(this)\r\n        //设为移除企业管理员\r\n        this.toggleBusManage=this.toggleBusManage.bind(this)\r\n    }\r\n    componentWillMount(){\r\n        let ah=window.screen.availHeight\r\n        //console.log(ah)\r\n        if(ah>900){\r\n            this.setState({scale:1})\r\n        }else if(ah<900&&ah>800){\r\n            this.setState({tscale:0.88})\r\n        }else if(ah<800&&ah>700){\r\n            this.setState({tscale:0.70})\r\n        }else{\r\n            this.setState({tscale:0.65})\r\n        }\r\n        this.getEmployees()\r\n    }\r\n    delStaff(e){\r\n        if(e.target.className==='del-staff-btn'){\r\n            this.props.toggleModalState('DEL_STAFF',true)\r\n        }\r\n    }\r\n    //获取员工列表\r\n    getEmployees(obj){\r\n        let p={\r\n            isAllocation:this.state.isAllocation,\r\n            page:this.state.page,\r\n            limit:this.state.limit,\r\n            searchName:this.state.searchName.trim(),\r\n            deptId:this.state.deptId\r\n        }\r\n        //合并参数\r\n        let params=obj?Object.assign(p,obj):p\r\n        this.props.getStaffList(params)\r\n    }\r\n    searchHandler(){\r\n        if(this.state.searchName.trim()!==''){\r\n            this.getEmployees()\r\n        }\r\n    }\r\n    emitEmptySearchName(){\r\n        this.setState({searchName:''})\r\n        //setState是异步的，这里特殊处理下\r\n        this.getEmployees({searchName:''})\r\n    }\r\n    //指定部门\r\n    appoint(){\r\n        this.props.toggleModalState('SET_DEPT',true)\r\n    }\r\n    staffDetail(e){\r\n        //阻止冒泡的一种方式\r\n        if(e.target.className.indexOf('tr-content')>-1){\r\n            this.props.toggleModalState('STAFF_DETAIL',true)\r\n        }\r\n    }\r\n    toggleDeptManage(bool){\r\n        if(bool){\r\n            this.props.toggleModalState('SET_DEPT_MANAGER',true)\r\n        }else{\r\n            this.props.toggleModalState('REMOVE_DEPT_MANAGER',true)\r\n        }\r\n    }\r\n    toggleBusManage(bool){\r\n        this.setState({sbmbool:bool})\r\n        this.props.toggleModalState('SET_BUS_MANAGER',true)\r\n    }\r\n    //过滤条件（全部员工，已分配，未分配）\r\n    filterEm(w){\r\n        this.setState({isAllocation:w})\r\n        this.getEmployees({isAllocation:w})\r\n    }\r\n    componentDidMount(){\r\n        \r\n    }\r\n    componentWillReceiveProps(np){\r\n        //console.log(np)\r\n    }\r\n    componentDidUpdate(){\r\n        //console.log(this.props)\r\n    }\r\n    \r\n    render(){\r\n        const filterPop=(\r\n            <div className='cp filter-items'>\r\n                <div className={this.state.isAllocation===''?'active':''} onClick={()=>this.filterEm('')}>全部员工</div>\r\n                <div className={this.state.isAllocation==='1'?'active':''} onClick={()=>this.filterEm('1')}>已分配</div>\r\n                <div className={this.state.isAllocation==='-1'?'active':''}  onClick={()=>this.filterEm('-1')}>待分配</div>\r\n            </div>\r\n        )\r\n        const tHead=[{\r\n            title:\"员工\",\r\n            dataIndex:'name',\r\n            render:text=><div className=\"cp\">{text}</div>\r\n        },{\r\n            title:\"所在部门\",\r\n            dataIndex:'dept',\r\n        },{\r\n            title:\"手机号\",\r\n            dataIndex:'phone',\r\n        },{\r\n            title:\"邮箱\",\r\n            dataIndex:'email',\r\n        }]\r\n        let pageData=this.props.employeese.object && this.props.employeese.object.length!==0?this.props.employeese.object.map(employee=>{\r\n            {/**遍历所在部门 */}\r\n            let deptList=employee.departments.length>0?employee.departments.map((d,i)=>{\r\n                return i>0 ?`、${d.name}`:d.name\r\n            }):'待分配'\r\n            {/**遍历当前用户角色 检查是否是企业管理员 ,bitPop意思是Popover的一部分（bit of Popover）*/}\r\n            let bitPop,ifbm\r\n            {/**企业管理员不可以移除自己（但是可以移除其他人），只能移交权限 */}\r\n            if(employee.userRoleInfos.length>0){\r\n                ifbm=employee.userRoleInfos.some(r=>{\r\n                    return r.roleName==='ENTERPRISE_MANAGER'\r\n                })\r\n                bitPop=ifbm?(this.props.loginUser.id===employee.userId?null:<p onClick={()=>this.toggleBusManage(false)}>移除企业管理员</p>):(<p onClick={()=>this.toggleBusManage(true)}>设为企业管理员</p>)\r\n                //bitPop=ifbm?null:(<p onClick={()=>this.toggleBusManage(true)}>设为企业管理员</p>)\r\n            }else{\r\n                bitPop= (<p onClick={()=>this.toggleBusManage(true)}>设为企业管理员</p>)\r\n            }\r\n            return {\r\n                key: employee.userId,\r\n                name: <div className=\"tr-content\" onClick={this.staffDetail}>\r\n                        <div>\r\n                            <Avatar src={getAvatar(employee.cloudUserId)}></Avatar>\r\n                            <span className=\"ml8\">{employee.name}</span>\r\n                            {employee.userRoleInfos.length>0?employee.userRoleInfos.map((r,i)=>{\r\n                                return r.roleName==='ENTERPRISE_MANAGER'?<span className='role-tip ml6' key={i}>企业管理员</span>:null\r\n                            }):null}\r\n                        </div>\r\n                        <Popover placement=\"leftTop\" content={\r\n                            <div className=\"cp\">\r\n                                <p onClick={this.appoint}>指定部门</p>\r\n                                {bitPop}\r\n                                {/*删除员工只有员工不属于任何部门时才有这个选项*/}\r\n                                {employee.departments.length===0?<p onClick={this.delStaff} className='del-staff-btn'>移除员工</p>:null}\r\n                            </div>\r\n                        }><Icon style={{display:'flex',alignItems:'center',fontSize: '20px'}} type=\"dash\" /></Popover>\r\n                    </div>,\r\n                dept: <div className=\"ellipsis cp tr-content\" onClick={this.staffDetail} title={deptList}>{deptList}</div>,\r\n                phone: employee.mobile || '未绑定',\r\n                email: employee.email || '未绑定',\r\n            }\r\n        }):[]\r\n\r\n        return(\r\n            <div className=\"dept-data-wrapper\">\r\n                <div className=\"toolbar\">\r\n                    <div className=\"dept-name-count\">\r\n                        <div className=\"icon-wrapper\">\r\n                            <img alt='' src={companyIcon}/>\r\n                        </div>\r\n                        <div className=\"name-count\">\r\n                            <h4 className=\"name\">{this.props.loginUser.enterpriseName|| '城乡结合部'}</h4>\r\n                            <div>成员（{this.props.enterpriseTotal}人）</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"operations\">\r\n                        <div className=\"oper-wrapper\">\r\n                            <Popover placement=\"bottom\" content={filterPop}>\r\n                                <Button><img className=\"icon vb mr6\" src={filterIcon} alt=''/>筛选</Button>\r\n                            </Popover>\r\n                        </div>\r\n                        <div className=\"search-wrapper\">\r\n                            <Input  prefix={<Icon type=\"search\"/>}  placeholder='请输入关键字查询' \r\n                                suffix={this.state.searchName ? <Icon type=\"close-circle\" onClick={this.emitEmptySearchName} /> : null}\r\n                                onChange={e=>this.setState({searchName:e.target.value})}  value={this.state.searchName}\r\n                                onPressEnter={this.searchHandler} />\r\n                            <Button onClick={this.searchHandler}>查询</Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {this.props.selectedStaffList.length>0?<div className=\"batch-btns\">\r\n                    <Button onClick={this.appoint} size=\"small\"><img src={appointIcon} className=\"icon\" alt=''/>指定部门</Button>\r\n                    {/* <Button size=\"small\"><img src={deleteIcon} className=\"icon\" alt=''/>删除员工</Button> */}\r\n                </div>:null}\r\n                <div className=\"datagrid-wrapper all-emp\">\r\n                    <Datagrid calSelect={true} tscale={this.state.tscale} tableHead={tHead} sourceData={pageData}/>\r\n                </div>\r\n                {this.props.employeese.total>0?<div className=\"pagenation-wrapper\">\r\n                    {/*自定义跳转到需要LocaleProvider，showQuickJumper*/}\r\n                    <Pagination\r\n                        defaultCurrent={this.props.employeese.currentPage} total={this.props.employeese.total} \r\n                        showTotal={()=>paginationTotal(this.props.employeese.total,this.props.employeese.currentPage)}\r\n                        onChange={this.pageChange}/>\r\n                </div>:null}\r\n                {this.props.employeeModalState.staffDetailModalVisible?<Personal/>:null}\r\n                {this.props.employeeModalState.setDeptModalVisible?<Appointmodal/>:null}\r\n                {this.props.employeeModalState.delStaffModalVisible?<DSModal />:null}\r\n                {this.props.employeeModalState.setDeptManagerModalVisible?<SDDModal/>:null}\r\n                {this.props.employeeModalState.setBusManagerModalVisible?<SBMModal bool={this.state.sbmbool}/>:null}\r\n                {this.props.employeeModalState.removeDeptManagerModalVisible?<RDMModal/>:null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Employee","module.exports = __webpack_public_path__ + \"static/media/company-icon.36257be4.svg\";","module.exports = __webpack_public_path__ + \"static/media/appoint-icon.0354e9b5.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete-icon.6032c5ed.svg\";"],"sourceRoot":""}
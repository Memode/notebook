{"version":3,"sources":["components/modals/sbmmodal.js"],"names":["__webpack_require__","_antd","_reactRedux","_employeeModalReducer","_staffReducer","CDModal","connect","state","_objectSpread","deptReducer","loginUser","userReducer","activePerson","staffReducer","toggleModalState","getStaffList","props","_this","_classCallCheck","this","_getPrototypeOf","call","handleOk","bind","_assertThisInitialized","handleCancel","React","Component","bool","setManager","removeManager","_this2","params","pointUserId","userId","pointType","deptId","http","put","then","res","status","message","success","getEmployees","_this3","delete","isAllocation","page","limit","searchName","_react2","default","createElement","Modal","width","visible","title","centered","onCancel","footer","Button","key","onClick","type"],"mappings":"kJACA,QAAAA,EAAA,IACAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,QACAA,EAAA,KACAG,EAAAH,EAAA,KACAI,EAAAJ,EAAA,05BAWMK,GAVL,EAAAH,EAAAI,SACG,SAAAC,GACI,0UAAAC,CAAA,GACOD,EAAME,YADb,CAEIC,UAAUH,EAAMI,YAChBC,aAAaL,EAAMM,aAAaD,gBAGxC,CAACE,oCAAiBC,4CAGlB,SAAAV,EAAYW,GAAM,IAAAC,MAAA,mGAAAC,CAAAC,KAAAd,KACdc,MAAAF,MAAAG,EAAAf,GAAAgB,KAAAF,KAAMH,oDACDM,SAASL,EAAKK,SAASC,KAAdC,IAAAP,KACdA,EAAKQ,aAAaR,EAAKQ,aAAaF,KAAlBC,IAAAP,KAHJA,yPADAS,UAAMC,oDAOjBR,KAAKH,MAAMY,KACVT,KAAKU,aAELV,KAAKW,qDAKD,IAAAC,EAAAZ,KACJa,EAAO,CACPC,YAAYd,KAAKH,MAAMJ,aAAasB,OAEpCC,UAAU,IACVC,OAAO,GAEXC,UAAKC,IAAI,8BAA8BN,GAAQO,KAAK,SAAAC,GAC7CA,GAAoB,MAAbA,EAAIC,SACVC,UAAQC,QAAQ,4BAChBZ,EAAKf,MAAMF,iBAAiB,WAAU,GAEtCiB,EAAKa,0DAIF,IAAAC,EAAA1B,KACXkB,UAAKS,OAAO,0BAA0B,CAAC3B,KAAKH,MAAMJ,aAAasB,OAAO,IAAI,IAAIK,KAAK,SAAAC,GAC5EA,GAAoB,MAAbA,EAAIC,SACVC,UAAQC,QAAQ,4BAChBE,EAAK7B,MAAMF,iBAAiB,WAAU,GAEtC+B,EAAKD,yDAabzB,KAAKH,MAAMD,aAPA,CACPgC,aAAa,GACbC,KAAK,EACLC,MAAM,GACNC,WAAW,GACXd,OAAO,4CAKZjB,KAAKH,MAAMF,iBAAiB,WAAU,oCAGrC,OACIqC,EAAAC,QAAAC,cAACpD,EAAAqD,MAAD,CACIC,MAAO,IACPC,SAAS,EACTC,MAAOtC,KAAKH,MAAMY,KAAK,6CAAU,6CAAW8B,UAAQ,EACpDC,SAAUxC,KAAKM,aACfmC,OAAQ,CACJT,EAAAC,QAAAC,cAACpD,EAAA4D,OAAD,CAAQC,IAAI,IAAKC,QAAS5C,KAAKM,cAA/B,gBACA0B,EAAAC,QAAAC,cAACpD,EAAA4D,OAAD,CAASC,IAAI,IAAIE,KAAK,UAAWD,QAAS5C,KAAKG,UAA/C,kBAPR,4FAgBGjB","file":"static/js/13.c5aa027e.chunk.js","sourcesContent":["//设置企业管理员\r\nimport React from 'react'\r\nimport {Modal,Button,message} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport http from 'libs/http'\r\nimport {toggleModalState} from 'store/employeeModalReducer'\r\nimport {getStaffList} from 'store/staffReducer'\r\n@connect(\r\n    state=>{\r\n        return{\r\n            ...state.deptReducer,\r\n            loginUser:state.userReducer,\r\n            activePerson:state.staffReducer.activePerson,\r\n        }\r\n    },\r\n    {toggleModalState,getStaffList}\r\n)\r\nclass CDModal extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.handleOk=this.handleOk.bind(this)\r\n        this.handleCancel=this.handleCancel.bind(this)\r\n    }\r\n    handleOk(){\r\n        if(this.props.bool){\r\n            this.setManager()\r\n        }else{\r\n            this.removeManager()\r\n        }\r\n        \r\n    }\r\n    \r\n    setManager(){\r\n        let params={\r\n            pointUserId:this.props.activePerson.userId,\r\n            //（0.：企业管理员1.：部门主管2.：部门管理员）\r\n            pointType:'0',\r\n            deptId:0\r\n        }\r\n        http.put('enterprise/admin/setManager',params).then(res=>{\r\n            if(res && res.status===200){\r\n                message.success('操作成功')\r\n                this.props.toggleModalState('DEFAULT',false)\r\n                //指定完成之后刷新当前页面\r\n                this.getEmployees()\r\n            }\r\n        })\r\n    }\r\n    removeManager(){\r\n        http.delete('enterprise/admin/delete',[this.props.activePerson.userId,'0',0]).then(res=>{\r\n            if(res && res.status===200){\r\n                message.success('操作成功')\r\n                this.props.toggleModalState('DEFAULT',false)\r\n                //指定完成之后刷新当前页面\r\n                this.getEmployees()\r\n            }\r\n        })\r\n    }\r\n    //获取员工列表\r\n    getEmployees(){\r\n        let params={\r\n            isAllocation:'',\r\n            page:1,\r\n            limit:30,\r\n            searchName:'',\r\n            deptId:''\r\n        }\r\n        this.props.getStaffList(params)\r\n    }\r\n    handleCancel(){\r\n       this.props.toggleModalState('DEFAULT',false)\r\n    }\r\n    render(){\r\n        return (\r\n            <Modal\r\n                width={300}\r\n                visible={true}\r\n                title={this.props.bool?\"设置企业管理员\":\"移除企业管理员\"} centered\r\n                onCancel={this.handleCancel}\r\n                footer={[\r\n                    <Button key='1'  onClick={this.handleCancel}>取消</Button>,\r\n                    <Button  key='2' type=\"primary\"  onClick={this.handleOk}>确认</Button>,\r\n                ]}\r\n                >\r\n                确定要操作吗?\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CDModal"],"sourceRoot":""}
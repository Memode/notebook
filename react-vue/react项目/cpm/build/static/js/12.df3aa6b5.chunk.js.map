{"version":3,"sources":["components/modals/udnmodal.js"],"names":["__webpack_require__","_antd","_reactRedux","_employeeModalReducer","_deptReducer","_staffReducer","CDModal","connect","state","loginUser","userReducer","deptList","deptReducer","currentDept","toggleModalState","getDeptList","setCurrentDept","getStaffList","props","_this","_classCallCheck","this","_getPrototypeOf","call","deptname","name","handleOk","bind","_assertThisInitialized","handleCancel","updateDeptName","React","Component","trim","length","message","error","_this2","http","post","deptId","departmentId","deptName","then","res","status","Modal","success","title","centered","content","type","userRole","_this3","_react2","default","createElement","width","visible","onCancel","footer","Button","key","onClick","Input","value","placeholder","onChange","e","setState","target"],"mappings":"kJACA,QAAAA,EAAA,IACAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,QACAA,EAAA,KACAG,EAAAH,EAAA,KACAI,EAAAJ,EAAA,KACAK,EAAAL,EAAA,kyBAWMM,GAVL,EAAAJ,EAAAK,SACG,SAAAC,GACI,MAAM,CACFC,UAAUD,EAAME,YAChBC,SAASH,EAAMI,YAAYD,SAC3BE,YAAYL,EAAMI,YAAYC,cAGtC,CAACC,oCAAiBC,0BAAYC,gCAAeC,4CAG7C,SAAAX,EAAYY,GAAM,IAAAC,MAAA,mGAAAC,CAAAC,KAAAf,KACde,MAAAF,MAAAG,EAAAhB,GAAAiB,KAAAF,KAAMH,oDACDV,MAAM,CACPgB,SAASL,EAAKD,MAAML,YAAYY,MAEpCN,EAAKO,SAASP,EAAKO,SAASC,KAAdC,IAAAT,KACdA,EAAKU,aAAaV,EAAKU,aAAaF,KAAlBC,IAAAT,KAClBA,EAAKW,eAAeX,EAAKW,eAAeH,KAApBC,IAAAT,KAPNA,yPADAY,UAAMC,oDAYjBX,KAAKb,MAAMgB,SAASS,OAAOC,OAAO,EACjCb,KAAKS,iBAELK,UAAQC,MAAM,6FAGN,IAAAC,EAAAhB,KACZiB,UAAKC,KAAK,kCAAkC,CAACC,OAAOnB,KAAKH,MAAML,YAAY4B,aAAaC,SAASrB,KAAKb,MAAMgB,WAAWmB,KAAK,SAAAC,GACrHA,GAAoB,MAAbA,EAAIC,SACVC,QAAMC,QAAQ,CACVC,MAAO,2BACPC,UAAS,EACTC,QAAS,8BAEbb,EAAKnB,MAAMJ,iBAAiB,WAAU,GACtCuB,EAAKnB,MAAMH,YAAY,CAACoC,KAAKd,EAAKnB,MAAMT,UAAU2C,WAElDf,EAAKnB,MAAML,YAAYY,KAAKY,EAAK7B,MAAMgB,SACvCa,EAAKnB,MAAMF,eAAeqB,EAAKnB,MAAML,aACrCwB,EAAKnB,MAAMD,aAAa,CAACuB,OAAOH,EAAKnB,MAAML,YAAY4B,yDAMhEpB,KAAKH,MAAMJ,iBAAiB,WAAU,oCAEjC,IAAAuC,EAAAhC,KACJ,OACIiC,EAAAC,QAAAC,cAACvD,EAAA6C,MAAD,CACIW,MAAO,IACPC,SAAS,EACTV,MAAM,uCAASC,UAAQ,EACvBU,SAAUtC,KAAKQ,aACf+B,OAAQ,CACJN,EAAAC,QAAAC,cAACvD,EAAA4D,OAAD,CAAQC,IAAI,IAAKC,QAAS1C,KAAKQ,cAA/B,gBACAyB,EAAAC,QAAAC,cAACvD,EAAA4D,OAAD,CAASC,IAAI,IAAIX,KAAK,UAAWY,QAAS1C,KAAKK,UAA/C,kBAGJ4B,EAAAC,QAAAC,cAACvD,EAAA+D,MAAD,CAAOC,MAAO5C,KAAKb,MAAMgB,SAAW0C,YAAY,6CAAUC,SAAU,SAAAC,GAAC,OAAEf,EAAKgB,SAAS,CAAC7C,SAAS4C,EAAEE,OAAOL,+DAMzG3D","file":"static/js/12.df3aa6b5.chunk.js","sourcesContent":["//修改部门名称\r\nimport React from 'react'\r\nimport {Modal,Button,Input,message} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport http from 'libs/http'\r\nimport {toggleModalState} from 'store/employeeModalReducer'\r\nimport {getDeptList,setCurrentDept} from 'store/deptReducer'\r\nimport {getStaffList} from 'store/staffReducer'\r\n@connect(\r\n    state=>{\r\n        return{\r\n            loginUser:state.userReducer,\r\n            deptList:state.deptReducer.deptList,\r\n            currentDept:state.deptReducer.currentDept,\r\n        }\r\n    },\r\n    {toggleModalState,getDeptList,setCurrentDept,getStaffList}\r\n)\r\nclass CDModal extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            deptname:this.props.currentDept.name\r\n        }\r\n        this.handleOk=this.handleOk.bind(this)\r\n        this.handleCancel=this.handleCancel.bind(this)\r\n        this.updateDeptName=this.updateDeptName.bind(this)\r\n    }\r\n    handleOk(){\r\n        //判空\r\n        if(this.state.deptname.trim().length>0){\r\n            this.updateDeptName()\r\n        }else{\r\n            message.error('部门名称不能为空')\r\n        }\r\n    }\r\n    updateDeptName(){\r\n        http.post('enterprise/depts/updateDeptName',{deptId:this.props.currentDept.departmentId,deptName:this.state.deptname}).then(res=>{\r\n            if(res && res.status===200){\r\n                Modal.success({\r\n                    title: '系统提示',\r\n                    centered:true,\r\n                    content: '修改成功!',\r\n                })\r\n                this.props.toggleModalState('DEFAULT',false)\r\n                this.props.getDeptList({type:this.props.loginUser.userRole})\r\n                //更新部门之后更新名称\r\n                this.props.currentDept.name=this.state.deptname\r\n                this.props.setCurrentDept(this.props.currentDept)\r\n                this.props.getStaffList({deptId:this.props.currentDept.departmentId})\r\n            }\r\n        })\r\n    }\r\n    \r\n    handleCancel(){\r\n       this.props.toggleModalState('DEFAULT',false)\r\n    }\r\n    render(){\r\n        return (\r\n            <Modal\r\n                width={300}\r\n                visible={true}\r\n                title=\"修改部门名称\" centered\r\n                onCancel={this.handleCancel}\r\n                footer={[\r\n                    <Button key='1'  onClick={this.handleCancel}>取消</Button>,\r\n                    <Button  key='2' type=\"primary\"  onClick={this.handleOk}>确认</Button>,\r\n                ]}\r\n                >\r\n                <Input value={this.state.deptname}  placeholder=\"请输入部门名称\" onChange={e=>this.setState({deptname:e.target.value})}/>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CDModal"],"sourceRoot":""}
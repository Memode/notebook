{"version":3,"sources":["components/modals/tdrmodal.js"],"names":["__webpack_require__","_antd","_reactRedux","_employeeModalReducer","_staffReducer","_common","TRModal","connect","state","loginUser","userReducer","activePerson","staffReducer","currentDept","deptReducer","toggleModalState","getMEL","props","_this","_classCallCheck","this","_getPrototypeOf","call","handleOk","bind","_assertThisInitialized","handleCancel","transferRight","React","Component","params","userId","moveUserId","id","moveType","moveDeptId","departmentId","http","post","then","res","status","Modal","success","title","centered","content","setTimeout","authTimeout","_react2","default","createElement","width","visible","mtitle","onCancel","footer","Button","key","onClick","type","name"],"mappings":"kJACA,QAAAA,EAAA,IACAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,QACAA,EAAA,KACAG,EAAAH,EAAA,KACAI,EAAAJ,EAAA,KACAK,EAAAL,EAAA,6xBACAA,EAAA,SAWMM,GAVL,EAAAJ,EAAAK,SACG,SAAAC,GACI,MAAM,CACFC,UAAUD,EAAME,YAChBC,aAAaH,EAAMI,aAAaD,aAChCE,YAAYL,EAAMM,YAAYD,cAGtC,CAACE,oCAAiBC,gCAGlB,SAAAV,EAAYW,GAAM,IAAAC,MAAA,mGAAAC,CAAAC,KAAAd,KACdc,MAAAF,MAAAG,EAAAf,GAAAgB,KAAAF,KAAMH,oDACDM,SAASL,EAAKK,SAASC,KAAdC,IAAAP,KACdA,EAAKQ,aAAaR,EAAKQ,aAAaF,KAAlBC,IAAAP,KAClBA,EAAKS,cAAcT,EAAKS,cAAcH,KAAnBC,IAAAP,KAJLA,yPADAU,UAAMC,iGASpBT,KAAKO,wDAIL,IAAIG,EAAO,CACPC,OAAOX,KAAKH,MAAMN,aAAaoB,OAC/BC,WAAWZ,KAAKH,MAAMR,UAAUwB,GAEhCC,SAAS,IACTC,WAAWf,KAAKH,MAAMJ,YAAYuB,cAEtCC,UAAKC,KAAK,8BAA8BR,GAAQS,KAAK,SAAAC,GAC9CA,GAAoB,MAAbA,EAAIC,SAIVC,QAAMC,QAAQ,CACVC,MAAO,2BACPC,UAAS,EACTC,QAAS,mFAGbC,WAAW,YACP,EAAA1C,EAAA2C,gBACF,+CAKV5B,KAAKH,MAAMF,iBAAiB,WAAU,oCAGtC,OACIkC,EAAAC,QAAAC,cAAClD,EAAAyC,MAAD,CACIU,MAAO,IACPC,SAAS,EACTT,MAAOxB,KAAKH,MAAMqC,OAAOlC,KAAKH,MAAMqC,OAAO,2BAAQT,UAAQ,EAC3DU,SAAUnC,KAAKM,aACf8B,OAAQ,CACJP,EAAAC,QAAAC,cAAClD,EAAAwD,OAAD,CAAQC,IAAI,IAAKC,QAASvC,KAAKM,cAA/B,gBACAuB,EAAAC,QAAAC,cAAClD,EAAAwD,OAAD,CAASC,IAAI,IAAIE,KAAK,UAAWD,QAASvC,KAAKG,UAA/C,kBAPR,6CAUYH,KAAKH,MAAMN,aAAakD,KAVpC,yEAgBGvD","file":"static/js/17.bf04d784.chunk.js","sourcesContent":["//移交部门主管权限（只是移交给选中的人，不是一个列表）\r\nimport React from 'react'\r\nimport {Modal,Button} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport http from 'libs/http'\r\nimport {toggleModalState} from 'store/employeeModalReducer'\r\nimport {getMEL} from 'store/staffReducer'\r\nimport {authTimeout} from 'libs/common'\r\nimport './modal.scss'\r\n@connect(\r\n    state=>{\r\n        return{\r\n            loginUser:state.userReducer,\r\n            activePerson:state.staffReducer.activePerson,\r\n            currentDept:state.deptReducer.currentDept\r\n        }\r\n    },\r\n    {toggleModalState,getMEL}\r\n)\r\nclass TRModal extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.handleOk=this.handleOk.bind(this)\r\n        this.handleCancel=this.handleCancel.bind(this)\r\n        this.transferRight=this.transferRight.bind(this)\r\n    }\r\n    componentDidMount(){}\r\n    handleOk(){\r\n        this.transferRight()\r\n    }\r\n    //userId(天选之子)，moveUserId（自己的），moveType（移交那种权限），moveDeptId（存在多个部门管理者的情况，移交企业管理者权限 0）\r\n    transferRight(){\r\n        let params={\r\n            userId:this.props.activePerson.userId,\r\n            moveUserId:this.props.loginUser.id,\r\n            //权限类型分为（0.：企业管理员1.：部门主管2.：部门管理员）\r\n            moveType:'1',\r\n            moveDeptId:this.props.currentDept.departmentId,\r\n        }\r\n        http.post('enterprise/admin/move/power',params).then(res=>{\r\n            if(res && res.status===200){\r\n                // this.props.toggleModalState('DEFAULT',false)\r\n                // //获取部门列表\r\n                // this.props.getDeptList({type:this.props.loginUser.userRole})\r\n                Modal.success({\r\n                    title: '系统提示',\r\n                    centered:true,\r\n                    content: '移交成功！即将返回官网首页'\r\n                })\r\n                // 操作成功之后跳回首页，清空缓存\r\n                setTimeout(()=>{\r\n                    authTimeout()\r\n                },3000)\r\n            }\r\n        })\r\n    }\r\n    handleCancel(){\r\n        this.props.toggleModalState('DEFAULT',false)\r\n     }\r\n    render(){\r\n        return (\r\n            <Modal\r\n                width={300}\r\n                visible={true}\r\n                title={this.props.mtitle?this.props.mtitle:\"权限移交\"} centered\r\n                onCancel={this.handleCancel}\r\n                footer={[\r\n                    <Button key='1'  onClick={this.handleCancel}>取消</Button>,\r\n                    <Button  key='2' type=\"primary\"  onClick={this.handleOk}>确认</Button>,\r\n                ]}\r\n                >\r\n                确定要移交给“{this.props.activePerson.name}”吗？\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TRModal"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[8,18],{636:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0});var l=c(n(1)),o=n(109),r=n(83),s=n(264),i=c(n(637));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(638);var h=l.default.createElement("div",null,l.default.createElement("img",{alt:"",src:i.default}),l.default.createElement("p",null,"\u6682\u65e0\u6570\u636e")),g=(0,r.connect)(function(e){return{employeese:e.staffReducer.staffData.object,selectedStaffList:e.staffReducer.selectedStaffList}},{togglePersonal:s.togglePersonal,selectedStaff:s.selectedStaff})(a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,l.default.Component),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,t={height:"".concat(70*this.props.tscale,"vh"),display:"flex",alignItems:"center",justifyContent:"center"},n=l.default.createElement("div",{style:t},h),a={selectedRowKeys:this.props.selectedStaffList.length>0?this.props.selectedStaffList.map(function(e){return e.key}):[],onChange:function(e,t){},onSelect:function(t,n,a){e.props.selectedStaff(a)},onSelectAll:function(t,n,a){e.props.selectedStaff(n)}};return l.default.createElement(o.Table,{rowSelection:this.props.calSelect?a:null,columns:this.props.tableHead,onRow:function(t){return{onClick:function(){var n=e.props.employeese.filter(function(e){return e.userId===t.key});e.props.togglePersonal(n[0])},onMouseEnter:function(){}}},size:this.props.tableSize?this.props.tableSize:"default",title:this.props.customHeader?this.props.customHeader:null,locale:{emptyText:n},pagination:!1,rowClassName:"table-row-name",className:"column-name",dataSource:this.props.sourceData,scroll:{y:"".concat(70*this.props.tscale,"vh")}})}}])&&f(n.prototype,a),r&&f(n,r),t}())||a;t.default=g},637:function(e,t,n){e.exports=n.p+"static/media/empty-icon.1e6b2481.svg"},638:function(e,t,n){},664:function(e,t,n){e.exports=n.p+"static/media/filter-icon.e4479bae.svg"},743:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0});var l=h(n(1));n(744);var o=h(n(746)),r=h(n(747)),s=(h(n(748)),h(n(664))),i=h(n(636)),c=n(109),u=n(83),f=n(85),p=n(110),d=n(264),m=h(n(267));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=(0,m.default)({loader:function(){return n.e(0).then(n.t.bind(null,645,7))},loading:function(){return null}}),N=(0,m.default)({loader:function(){return n.e(2).then(n.t.bind(null,723,7))},loading:function(){return null}}),M=(0,m.default)({loader:function(){return n.e(1).then(n.t.bind(null,682,7))},loading:function(){return null}}),k=(0,m.default)({loader:function(){return n.e(13).then(n.t.bind(null,845,7))},loading:function(){return null}}),w=(0,m.default)({loader:function(){return n.e(14).then(n.t.bind(null,846,7))},loading:function(){return null}}),_=(0,m.default)({loader:function(){return n.e(15).then(n.t.bind(null,847,7))},loading:function(){return null}}),P=l.default.createElement("div",{className:"icon-wrapper"},l.default.createElement("img",{alt:"",src:o.default})),R=l.default.createElement(c.Button,null,l.default.createElement("img",{className:"icon vb mr6",src:s.default,alt:""}),"\u7b5b\u9009"),O=l.default.createElement(c.Icon,{type:"search"}),A=l.default.createElement("img",{src:r.default,className:"icon",alt:""}),C=l.default.createElement(S,null),I=l.default.createElement(_,null),D=l.default.createElement(M,null),T=l.default.createElement(N,null),j=l.default.createElement(w,null),x=(0,u.connect)(function(e){return{loginUser:e.userReducer,selectedStaffList:e.staffReducer.selectedStaffList,employeese:e.staffReducer.staffData,enterpriseTotal:e.staffReducer.enterpriseTotal,employeeModalState:e.employeeModalReducer,deptList:e.deptReducer.deptList}},{toggleModalState:p.toggleModalState,getStaffList:d.getStaffList})(a=function(e){function t(e){var n,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(l=b(t).call(this,e))||"object"!==g(l)&&"function"!==typeof l?v(a):l).state={tscale:1,isAllocation:"",page:1,limit:30,searchName:"",deptId:0,sbmbool:!0},n.getEmployees=n.getEmployees.bind(v(v(n))),n.staffDetail=n.staffDetail.bind(v(v(n))),n.appoint=n.appoint.bind(v(v(n))),n.filterEm=n.filterEm.bind(v(v(n))),n.delStaff=n.delStaff.bind(v(v(n))),n.searchHandler=n.searchHandler.bind(v(v(n))),n.emitEmptySearchName=n.emitEmptySearchName.bind(v(v(n))),n.toggleDeptManage=n.toggleDeptManage.bind(v(v(n))),n.toggleBusManage=n.toggleBusManage.bind(v(v(n))),n}var n,a,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,l.default.Component),n=t,(a=[{key:"componentWillMount",value:function(){var e=window.screen.availHeight;e>900?this.setState({scale:1}):e<900&&e>800?this.setState({tscale:.88}):e<800&&e>700?this.setState({tscale:.7}):this.setState({tscale:.65}),this.getEmployees()}},{key:"delStaff",value:function(e){"del-staff-btn"===e.target.className&&this.props.toggleModalState("DEL_STAFF",!0)}},{key:"getEmployees",value:function(e){var t={isAllocation:this.state.isAllocation,page:this.state.page,limit:this.state.limit,searchName:this.state.searchName.trim(),deptId:this.state.deptId},n=e?Object.assign(t,e):t;this.props.getStaffList(n)}},{key:"searchHandler",value:function(){""!==this.state.searchName.trim()&&this.getEmployees()}},{key:"emitEmptySearchName",value:function(){this.setState({searchName:""}),this.getEmployees({searchName:""})}},{key:"appoint",value:function(){this.props.toggleModalState("SET_DEPT",!0)}},{key:"staffDetail",value:function(e){e.target.className.indexOf("tr-content")>-1&&this.props.toggleModalState("STAFF_DETAIL",!0)}},{key:"toggleDeptManage",value:function(e){e?this.props.toggleModalState("SET_DEPT_MANAGER",!0):this.props.toggleModalState("REMOVE_DEPT_MANAGER",!0)}},{key:"toggleBusManage",value:function(e){this.setState({sbmbool:e}),this.props.toggleModalState("SET_BUS_MANAGER",!0)}},{key:"filterEm",value:function(e){this.setState({isAllocation:e}),this.getEmployees({isAllocation:e})}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=l.default.createElement("div",{className:"cp filter-items"},l.default.createElement("div",{className:""===this.state.isAllocation?"active":"",onClick:function(){return e.filterEm("")}},"\u5168\u90e8\u5458\u5de5"),l.default.createElement("div",{className:"1"===this.state.isAllocation?"active":"",onClick:function(){return e.filterEm("1")}},"\u5df2\u5206\u914d"),l.default.createElement("div",{className:"-1"===this.state.isAllocation?"active":"",onClick:function(){return e.filterEm("-1")}},"\u5f85\u5206\u914d")),n=[{title:"\u5458\u5de5",dataIndex:"name",render:function(e){return l.default.createElement("div",{className:"cp"},e)}},{title:"\u6240\u5728\u90e8\u95e8",dataIndex:"dept"},{title:"\u624b\u673a\u53f7",dataIndex:"phone"},{title:"\u90ae\u7bb1",dataIndex:"email"}],a=this.props.employeese.object&&0!==this.props.employeese.object.length?this.props.employeese.object.map(function(t){var n,a=t.departments.length>0?t.departments.map(function(e,t){return t>0?"\u3001".concat(e.name):e.name}):"\u5f85\u5206\u914d";return n=t.userRoleInfos.length>0&&t.userRoleInfos.some(function(e){return"ENTERPRISE_MANAGER"===e.roleName})?e.props.loginUser.id===t.userId?null:l.default.createElement("p",{onClick:function(){return e.toggleBusManage(!1)}},"\u79fb\u9664\u4f01\u4e1a\u7ba1\u7406\u5458"):l.default.createElement("p",{onClick:function(){return e.toggleBusManage(!0)}},"\u8bbe\u4e3a\u4f01\u4e1a\u7ba1\u7406\u5458"),{key:t.userId,name:l.default.createElement("div",{className:"tr-content",onClick:e.staffDetail},l.default.createElement("div",null,l.default.createElement(c.Avatar,{src:(0,f.getAvatar)(t.cloudUserId)}),l.default.createElement("span",{className:"ml8"},t.name),t.userRoleInfos.length>0?t.userRoleInfos.map(function(e,t){return"ENTERPRISE_MANAGER"===e.roleName?l.default.createElement("span",{className:"role-tip ml6",key:t},"\u4f01\u4e1a\u7ba1\u7406\u5458"):null}):null),l.default.createElement(c.Popover,{placement:"leftTop",content:l.default.createElement("div",{className:"cp"},l.default.createElement("p",{onClick:e.appoint},"\u6307\u5b9a\u90e8\u95e8"),n,0===t.departments.length?l.default.createElement("p",{onClick:e.delStaff,className:"del-staff-btn"},"\u79fb\u9664\u5458\u5de5"):null)},l.default.createElement(c.Icon,{style:{display:"flex",alignItems:"center",fontSize:"20px"},type:"dash"}))),dept:l.default.createElement("div",{className:"ellipsis cp tr-content",onClick:e.staffDetail,title:a},a),phone:t.mobile||"\u672a\u7ed1\u5b9a",email:t.email||"\u672a\u7ed1\u5b9a"}}):[];return l.default.createElement("div",{className:"dept-data-wrapper"},l.default.createElement("div",{className:"toolbar"},l.default.createElement("div",{className:"dept-name-count"},P,l.default.createElement("div",{className:"name-count"},l.default.createElement("h4",{className:"name"},this.props.loginUser.enterpriseName||"\u57ce\u4e61\u7ed3\u5408\u90e8"),l.default.createElement("div",null,"\u6210\u5458\uff08",this.props.enterpriseTotal,"\u4eba\uff09"))),l.default.createElement("div",{className:"operations"},l.default.createElement("div",{className:"oper-wrapper"},l.default.createElement(c.Popover,{placement:"bottom",content:t},R)),l.default.createElement("div",{className:"search-wrapper"},l.default.createElement(c.Input,{prefix:O,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57\u67e5\u8be2",suffix:this.state.searchName?l.default.createElement(c.Icon,{type:"close-circle",onClick:this.emitEmptySearchName}):null,onChange:function(t){return e.setState({searchName:t.target.value})},value:this.state.searchName,onPressEnter:this.searchHandler}),l.default.createElement(c.Button,{onClick:this.searchHandler},"\u67e5\u8be2")))),this.props.selectedStaffList.length>0?l.default.createElement("div",{className:"batch-btns"},l.default.createElement(c.Button,{onClick:this.appoint,size:"small"},A,"\u6307\u5b9a\u90e8\u95e8")):null,l.default.createElement("div",{className:"datagrid-wrapper all-emp"},l.default.createElement(i.default,{calSelect:!0,tscale:this.state.tscale,tableHead:n,sourceData:a})),this.props.employeese.total>0?l.default.createElement("div",{className:"pagenation-wrapper"},l.default.createElement(c.Pagination,{defaultCurrent:this.props.employeese.currentPage,total:this.props.employeese.total,showTotal:function(){return(0,f.paginationTotal)(e.props.employeese.total,e.props.employeese.currentPage)},onChange:this.pageChange})):null,this.props.employeeModalState.staffDetailModalVisible?C:null,this.props.employeeModalState.setDeptModalVisible?I:null,this.props.employeeModalState.delStaffModalVisible?D:null,this.props.employeeModalState.setDeptManagerModalVisible?T:null,this.props.employeeModalState.setBusManagerModalVisible?l.default.createElement(k,{bool:this.state.sbmbool}):null,this.props.employeeModalState.removeDeptManagerModalVisible?j:null)}}])&&y(n.prototype,a),o&&y(n,o),t}())||a;t.default=x},744:function(e,t,n){},746:function(e,t,n){e.exports=n.p+"static/media/company-icon.36257be4.svg"},747:function(e,t,n){e.exports=n.p+"static/media/appoint-icon.0354e9b5.svg"},748:function(e,t,n){e.exports=n.p+"static/media/delete-icon.6032c5ed.svg"}}]);
//# sourceMappingURL=8.1400566d.chunk.js.map
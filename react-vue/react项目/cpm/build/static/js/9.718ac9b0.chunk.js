(window.webpackJsonp=window.webpackJsonp||[]).push([[9,18],{636:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var a=c(n(1)),o=n(109),l=n(83),s=n(264),i=c(n(637));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(638);var h=a.default.createElement("div",null,a.default.createElement("img",{alt:"",src:i.default}),a.default.createElement("p",null,"\u6682\u65e0\u6570\u636e")),y=(0,l.connect)(function(e){return{employeese:e.staffReducer.staffData.object,selectedStaffList:e.staffReducer.selectedStaffList}},{togglePersonal:s.togglePersonal,selectedStaff:s.selectedStaff})(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,d(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,a.default.Component),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,t={height:"".concat(70*this.props.tscale,"vh"),display:"flex",alignItems:"center",justifyContent:"center"},n=a.default.createElement("div",{style:t},h),r={selectedRowKeys:this.props.selectedStaffList.length>0?this.props.selectedStaffList.map(function(e){return e.key}):[],onChange:function(e,t){},onSelect:function(t,n,r){e.props.selectedStaff(r)},onSelectAll:function(t,n,r){e.props.selectedStaff(n)}};return a.default.createElement(o.Table,{rowSelection:this.props.calSelect?r:null,columns:this.props.tableHead,onRow:function(t){return{onClick:function(){var n=e.props.employeese.filter(function(e){return e.userId===t.key});e.props.togglePersonal(n[0])},onMouseEnter:function(){}}},size:this.props.tableSize?this.props.tableSize:"default",title:this.props.customHeader?this.props.customHeader:null,locale:{emptyText:n},pagination:!1,rowClassName:"table-row-name",className:"column-name",dataSource:this.props.sourceData,scroll:{y:"".concat(70*this.props.tscale,"vh")}})}}])&&p(n.prototype,r),l&&p(n,l),t}())||r;t.default=y},637:function(e,t,n){e.exports=n.p+"static/media/empty-icon.1e6b2481.svg"},638:function(e,t,n){},662:function(e,t,n){e.exports=n.p+"static/media/dept-icon-person.84461699.svg"},665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(629));function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n(717),n(718),n(719),n(680);var f=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=c(t).call(this,e))||"object"!==s(a)&&"function"!==typeof a?p(r):a).setPieOption=n.setPieOption.bind(p(p(n))),n.state={lastColor:"#E4E4E4",usedColor:"#8198FC",warnColor:"#FE5826"},n}var n,r,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.default.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=[{type:"used",name:"\u5df2\u4f7f\u7528"},{type:"total",name:"\u5269\u4f59\u5bb9\u91cf"}],t=this.props.pieData,n=t?[Object.assign(e[0],t[0]),Object.assign(e[1],t[1])]:e,r=l.init(this.refs.container),a=this.setPieOption(n,this.state.lastColor,this.state.usedColor,this.state.warnColor,this.props.title);r.setOption(a)}},{key:"setPieOption",value:function(e,t,n,r,a){return{title:{text:a,left:"center",top:"center",textStyle:{color:"#333",fontSize:14,align:"center",fontFamily:"PingFangSC-Medium"}},series:[{name:"\u6bd4\u4f8b",type:"pie",stillShowZeroSum:!1,radius:["50%","75%"],avoidLabelOverlap:!1,data:e,itemStyle:{normal:{color:function(e){return e.percent>80&&"used"===e.data.type?r:"used"===e.data.type?n:"total"===e.data.type?t:void 0}}},label:{normal:{show:!1},emphasis:{show:!1}},labelLine:{normal:{show:!1}}}]}}},{key:"render",value:function(){return o.default.createElement("div",{className:"pie-container-wrapper"},o.default.createElement("div",{ref:"container",style:{width:"".concat(this.props.pw?this.props.pw:"150","px"),height:"".concat(this.props.ph?this.props.ph:"150","px")}}))}}])&&i(n.prototype,r),a&&i(n,a),t}();t.default=f},680:function(e,t,n){},749:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var a=h(n(1));n(750);var o=h(n(662)),l=h(n(636)),s=h(n(665)),i=n(109),c=n(83),u=n(85),p=n(110),f=n(264),d=n(265),m=h(n(267));function h(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S=(0,m.default)({loader:function(){return n.e(0).then(n.t.bind(null,645,7))},loading:function(){return null}}),D=(0,m.default)({loader:function(){return n.e(3).then(n.t.bind(null,724,7))},loading:function(){return null}}),w=(0,m.default)({loader:function(){return n.e(1).then(n.t.bind(null,682,7))},loading:function(){return null}}),O=(0,m.default)({loader:function(){return n.e(16).then(n.t.bind(null,848,7))},loading:function(){return null}}),_=(0,m.default)({loader:function(){return n.e(17).then(n.t.bind(null,849,7))},loading:function(){return null}}),N=a.default.createElement("span",{className:"ml6 role-tip"},"\u4f01\u4e1a\u7ba1\u7406\u5458"),P=a.default.createElement("span",{className:"ml6 role-tip"},"\u90e8\u95e8\u7ba1\u7406\u5458"),I=a.default.createElement("span",{className:"ml6 role-tip"},"\u90e8\u95e8\u4e3b\u7ba1"),R=a.default.createElement("img",{alt:"",src:o.default}),j=a.default.createElement(i.Icon,{type:"search"}),C=a.default.createElement(S,null),k=a.default.createElement(D,null),M=a.default.createElement(w,null),T=a.default.createElement(_,{trType:"DEPT_DIRECTOR",mtitle:"\u79fb\u4ea4\u90e8\u95e8\u4e3b\u7ba1\u6743\u9650"}),x=(0,c.connect)(function(e){return{loginUser:e.userReducer,selectedStaffList:e.staffReducer.selectedStaffList,employeeModalState:e.employeeModalReducer,currentDept:e.deptReducer.currentDept,employeese:e.staffReducer.staffData,deptList:e.deptReducer.deptList}},{toggleModalState:p.toggleModalState,getStaffList:f.getStaffList,setCurrentDept:d.setCurrentDept})(r=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=g(t).call(this,e))||"object"!==y(a)&&"function"!==typeof a?E(r):a).state={tscale:1,page:1,limit:30,searchName:"",deptId:"",sdmbool:!0},n.getEmployees=n.getEmployees.bind(E(E(n))),n.addStaff=n.addStaff.bind(E(E(n))),n.staffDetail=n.staffDetail.bind(E(E(n))),n.delStaff=n.delStaff.bind(E(E(n))),n.toggleDeptDirect=n.toggleDeptDirect.bind(E(E(n))),n.transferRight=n.transferRight.bind(E(E(n))),n.searchHandler=n.searchHandler.bind(E(E(n))),n.emitEmptySearchName=n.emitEmptySearchName.bind(E(E(n))),n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a.default.Component),n=t,(r=[{key:"componentWillMount",value:function(){var e=window.screen.availHeight;console.log(e),e>900?this.setState({scale:1}):e<900&&e>800?this.setState({tscale:.88}):e<800&&e>700?this.setState({tscale:.7}):this.setState({tscale:.65}),this.props.currentDept&&this.getEmployees({deptId:this.props.currentDept.departmentId})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;t.currentDept&&e.currentDept&&t.currentDept.departmentId!==e.currentDept.departmentId&&this.getEmployees({deptId:e.currentDept.departmentId}),""===t.loginUser.userRole||t.currentDept||e.currentDept||e.deptList&&e.deptList.length>0&&(t.setCurrentDept(e.deptList[0]),this.getEmployees(e.deptList[0].departmentId)),t.currentDept&&t.currentDept!==e.currentDept&&this.getEmployees({deptId:e.currentDept.departmentId}),!t.currentDept&&e.currentDept&&this.getEmployees({deptId:e.currentDept.departmentId})}},{key:"componentDidMount",value:function(){}},{key:"toggleDeptDirect",value:function(e){console.log(e),this.setState({sdmbool:e}),this.props.toggleModalState("SET_DEPT_MANAGER",!0)}},{key:"getEmployees",value:function(e){var t={page:this.state.page,limit:this.state.limit,searchName:this.state.searchName,deptId:this.props.currentDept?this.props.currentDept.departmentId:0},n=e?Object.assign(t,e):t;this.props.getStaffList(n)}},{key:"searchHandler",value:function(){""!==this.state.searchName.trim()&&this.getEmployees()}},{key:"emitEmptySearchName",value:function(){this.setState({searchName:""}),this.getEmployees({searchName:""})}},{key:"delStaff",value:function(e){"del-staff-btn"===e.target.className&&this.props.toggleModalState("DEL_STAFF",!0)}},{key:"staffDetail",value:function(e){e.target.className.indexOf("sd-class")>-1&&this.props.toggleModalState("STAFF_DETAIL",!0)}},{key:"transferRight",value:function(){this.props.toggleModalState("TRANSFER_D_RIGHT",!0)}},{key:"addStaff",value:function(){this.props.toggleModalState("ADD_STAFF",!0)}},{key:"render",value:function(){var e=this,t=[{title:"\u5458\u5de5",dataIndex:"name",render:function(e){return a.default.createElement("div",{className:"cp"},e)}},{title:"\u6240\u5728\u90e8\u95e8",dataIndex:"dept"},{title:"\u5bb9\u91cf",dataIndex:"capa"},{title:"\u624b\u673a\u53f7",dataIndex:"phone"},{title:"\u90ae\u7bb1",dataIndex:"email"}],n=this.props.employeese.object&&0!==this.props.employeese.object.length?this.props.employeese.object.map(function(t){var n,r,o,l=t.departments.length>0?t.departments.map(function(e,t){return t>0?"\u3001".concat(e.name):e.name}):"\u5f85\u5206\u914d";return t.userRoleInfos.length>0&&(n=t.userRoleInfos.some(function(t){return t.departmentId===e.props.currentDept.departmentId&&"DEPT_MANAGER"===t.roleName}),o=t.userRoleInfos.some(function(t){return t.departmentId===e.props.currentDept.departmentId&&"DEPT_DIRECTOR"===t.roleName}),r=t.userRoleInfos.some(function(e){return"ENTERPRISE_MANAGER"===e.roleName})),{key:t.userId,name:a.default.createElement("div",{className:"tr-content sd-class",onClick:e.staffDetail},a.default.createElement("div",null,a.default.createElement(i.Avatar,{src:(0,u.getAvatar)(t.cloudUserId)}),a.default.createElement("span",{className:"ml8"},t.name),r?N:null,n?P:null,o?I:null),"enterprise"===e.props.loginUser.userRole?null:a.default.createElement(i.Popover,{placement:"leftTop",content:a.default.createElement("div",{className:"cp"},o?null:n?a.default.createElement("p",{onClick:function(){return e.toggleDeptDirect(!1)}},"\u79fb\u9664\u90e8\u95e8\u7ba1\u7406\u5458"):a.default.createElement("p",{onClick:function(){return e.toggleDeptDirect(!0)}},"\u8bbe\u4e3a\u90e8\u95e8\u7ba1\u7406\u5458"),n||o?null:a.default.createElement("p",{onClick:e.transferRight},"\u79fb\u4ea4\u90e8\u95e8\u4e3b\u7ba1"),a.default.createElement("p",{className:"del-staff-btn",onClick:e.delStaff},"\u79fb\u9664\u5458\u5de5"))},a.default.createElement(i.Icon,{style:{display:"flex",alignItems:"center",fontSize:"20px"},type:"dash"}))),dept:a.default.createElement("div",{className:"ellipsis cp deptList sd-class",onClick:e.staffDetail,title:l},l),capa:a.default.createElement("div",null,"\u5df2\u7528",t.spaceUsed,"/\u5171",t.spaceTotal,"G"),phone:t.mobile||"\u672a\u7ed1\u5b9a",email:t.email||"\u672a\u7ed1\u5b9a"}}):[];return a.default.createElement("div",{className:"dept-data-wrapper"},a.default.createElement("div",{className:"toolbar"},a.default.createElement("div",{className:"dept-name-count"},a.default.createElement("div",{className:"icon-wrapper"},this.props.currentDept?a.default.createElement(s.default,{pieData:[{value:this.props.currentDept.departmentPicSpaceUsed},{value:this.props.currentDept.departmentSpaceTotal-this.props.currentDept.departmentPicSpaceUsed}],pw:60,ph:60,title:""}):R),a.default.createElement("div",{className:"name-count"},a.default.createElement("h4",{className:"name"},this.props.currentDept?this.props.currentDept.name:"\u672a\u5b9a\u4e49","\uff08\u5171",this.props.employeese.total,"\u4eba\uff09"),a.default.createElement("div",null,this.props.currentDept?"\u5df2\u4f7f\u7528".concat(this.props.currentDept.departmentSpaceUsed,"/\u5171").concat(this.props.currentDept.departmentSpaceTotal,"G"):"\u5df2\u4f7f\u75280G/\u51710G"))),a.default.createElement("div",{className:"operations"},a.default.createElement("div",{className:"oper-wrapper"},a.default.createElement(i.Button,{onClick:this.addStaff},"\u6dfb\u52a0\u5458\u5de5")),a.default.createElement("div",{className:"search-wrapper"},a.default.createElement(i.Input,{prefix:j,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57\u67e5\u8be2",suffix:this.state.searchName?a.default.createElement(i.Icon,{type:"close-circle",onClick:this.emitEmptySearchName}):null,onChange:function(t){return e.setState({searchName:t.target.value})},value:this.state.searchName,onPressEnter:this.searchHandler}),a.default.createElement(i.Button,{onClick:this.searchHandler},"\u67e5\u8be2")))),a.default.createElement("div",{className:"datagrid-wrapper demp"},a.default.createElement(l.default,{calSelect:!1,tscale:this.state.tscale,tableHead:t,sourceData:n})),this.props.employeese.total>0?a.default.createElement("div",{className:"pagenation-wrapper"},a.default.createElement(i.Pagination,{defaultCurrent:this.props.employeese.currentPage,total:this.props.employeese.total,showTotal:function(){return(0,u.paginationTotal)(e.props.employeese.total,e.props.employeese.currentPage)},onChange:this.pageChange})):null,this.props.employeeModalState.staffDetailModalVisible?C:null,this.props.employeeModalState.addStaffModalVisible?k:null,this.props.employeeModalState.delStaffModalVisible?M:null,this.props.employeeModalState.setDeptManagerModalVisible?a.default.createElement(O,{bool:this.state.sdmbool}):null,this.props.employeeModalState.transferDRightModalVisible?T:null)}}])&&b(n.prototype,r),o&&b(n,o),t}())||r;t.default=x},750:function(e,t,n){}}]);
//# sourceMappingURL=9.718ac9b0.chunk.js.map
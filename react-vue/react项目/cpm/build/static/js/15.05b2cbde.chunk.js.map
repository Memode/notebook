{"version":3,"sources":["components/modals/appointmodal.js"],"names":["__webpack_require__","_antd","_reactRedux","_employeeModalReducer","_deptReducer","_staffReducer","CDModal","connect","state","loginUser","userReducer","selectedStaffList","staffReducer","activePerson","deptList","deptReducer","toggleModalState","getDeptList","getStaffList","selectedStaff","props","_this","_classCallCheck","this","_getPrototypeOf","call","newDeptId","enterpriseUserIds","handleOk","bind","_assertThisInitialized","handleCancel","appointFn","onChange","React","Component","type","userRole","_this2","length","staff","map","e","key","userId","_this3","http","put","then","res","status","Modal","success","title","centered","content","setState","target","value","_react2","default","createElement","width","visible","onCancel","footer","Button","onClick","className","Radio","Group","style","d","departmentId","name"],"mappings":"kJACA,QAAAA,EAAA,IACAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,QACAA,EAAA,KACAG,EAAAH,EAAA,KACAI,EAAAJ,EAAA,KACAK,EAAAL,EAAA,8xBACAA,EAAA,SAaMM,GAXL,EAAAJ,EAAAK,SACG,SAAAC,GACI,MAAM,CACFC,UAAUD,EAAME,YAChBC,kBAAkBH,EAAMI,aAAaD,kBACrCE,aAAaL,EAAMI,aAAaC,aAChCC,SAASN,EAAMO,YAAYD,WAGnC,CAACE,oCAAiBC,0BAAYC,4BAAaC,8CAG3C,SAAAb,EAAYc,GAAM,IAAAC,MAAA,mGAAAC,CAAAC,KAAAjB,KACdiB,MAAAF,MAAAG,EAAAlB,GAAAmB,KAAAF,KAAMH,oDACDZ,MAAM,CACPkB,UAAU,GACVC,kBAAkB,IAEtBN,EAAKO,SAASP,EAAKO,SAASC,KAAdC,IAAAT,KACdA,EAAKU,aAAaV,EAAKU,aAAaF,KAAlBC,IAAAT,KAClBA,EAAKW,UAAUX,EAAKW,UAAUH,KAAfC,IAAAT,KACfA,EAAKY,SAASZ,EAAKY,SAASJ,KAAdC,IAAAT,KATAA,yPADAa,UAAMC,8DAchBZ,KAAKH,MAAMN,UACXS,KAAKH,MAAMH,YAAY,CAACmB,KAAKb,KAAKH,MAAMX,UAAU4B,4FAMhD,IAAAC,EAAAf,KAEN,GAA0B,KAAvBA,KAAKf,MAAMkB,WAAkBH,KAAKH,MAAMT,kBAAkB4B,OAAO,EAAE,CAClE,IAAMC,EAAMjB,KAAKH,MAAMT,kBAAkB8B,IAAI,SAAAC,GACzC,MAAO,CAAChB,UAAUY,EAAK9B,MAAMkB,UAAUC,kBAAkBe,EAAEC,OAE/DpB,KAAKS,UAAUQ,OACa,KAAvBjB,KAAKf,MAAMkB,WAAkBH,KAAKH,MAAMP,cAE7CU,KAAKS,UAAU,CAAC,CAACN,UAAUH,KAAKf,MAAMkB,UAAUC,kBAAkBJ,KAAKH,MAAMP,aAAa+B,4CAGxFJ,GAAM,IAAAK,EAAAtB,KACZuB,UAAKC,IAAI,uBAAuBP,GAAOQ,KAAK,SAAAC,GACrCA,GAAoB,MAAbA,EAAIC,SACVC,QAAMC,QAAQ,CACVC,MAAO,2BACPC,UAAS,EACTC,QAAS,8BAEbV,EAAKzB,MAAMJ,iBAAiB,WAAU,GAEtC6B,EAAKzB,MAAMD,cAAc,IAEzB0B,EAAKzB,MAAMF,yDAKpBK,KAAKH,MAAMJ,iBAAiB,WAAU,oCAEhC0B,GACLnB,KAAKiC,SAAS,CAAC9B,UAAUgB,EAAEe,OAAOC,yCAGlC,OACIC,EAAAC,QAAAC,cAAC5D,EAAAkD,MAAD,CACIW,MAAO,IACPC,SAAS,EACTV,MAAM,2BAAOC,UAAQ,EACrBU,SAAUzC,KAAKQ,aACfkC,OAAQ,CACJN,EAAAC,QAAAC,cAAC5D,EAAAiE,OAAD,CAAQvB,IAAI,IAAKwB,QAAS5C,KAAKQ,cAA/B,gBACA4B,EAAAC,QAAAC,cAAC5D,EAAAiE,OAAD,CAASvB,IAAI,IAAIP,KAAK,UAAW+B,QAAS5C,KAAKK,UAA/C,kBAGJ+B,EAAAC,QAAAC,cAAA,OAAKO,UAAU,iBACXT,EAAAC,QAAAC,cAAC5D,EAAAoE,MAAMC,MAAP,CAAaC,MAAO,CAAET,MAAO,QAAU7B,SAAUV,KAAKU,UACjDV,KAAKH,MAAMN,SAASS,KAAKH,MAAMN,SAAS2B,IAAI,SAAA+B,GACzC,OAAOb,EAAAC,QAAAC,cAAA,OAAKO,UAAU,cAAczB,IAAK6B,EAAEC,cAAcd,EAAAC,QAAAC,cAAC5D,EAAAoE,MAAD,CAAQX,MAAOc,EAAEC,cAAeD,EAAEE,SAC5F,2DAQZpE","file":"static/js/15.05b2cbde.chunk.js","sourcesContent":["//指定部门\r\nimport React from 'react'\r\nimport {Modal,Button,Radio} from 'antd'\r\nimport {connect} from 'react-redux'\r\nimport http from 'libs/http'\r\nimport {toggleModalState} from 'store/employeeModalReducer'\r\nimport {getDeptList} from 'store/deptReducer'\r\nimport {getStaffList,selectedStaff} from 'store/staffReducer'\r\nimport './modal.scss'\r\n\r\n@connect(\r\n    state=>{\r\n        return{\r\n            loginUser:state.userReducer,\r\n            selectedStaffList:state.staffReducer.selectedStaffList,\r\n            activePerson:state.staffReducer.activePerson,\r\n            deptList:state.deptReducer.deptList\r\n        }\r\n    },\r\n    {toggleModalState,getDeptList,getStaffList,selectedStaff}\r\n)\r\nclass CDModal extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            newDeptId:'',\r\n            enterpriseUserIds:[],\r\n        }\r\n        this.handleOk=this.handleOk.bind(this)\r\n        this.handleCancel=this.handleCancel.bind(this)\r\n        this.appointFn=this.appointFn.bind(this)\r\n        this.onChange=this.onChange.bind(this)\r\n    }\r\n    \r\n    componentWillMount(){\r\n        if(!this.props.deptList){\r\n            this.props.getDeptList({type:this.props.loginUser.userRole})\r\n        }\r\n    }\r\n    componentDidUpdate(){\r\n        //console.log(this.props)\r\n    }\r\n    handleOk(){\r\n        //批量操作\r\n        if(this.state.newDeptId!=='' && this.props.selectedStaffList.length>0){\r\n            const staff=this.props.selectedStaffList.map(e=>{\r\n                return {newDeptId:this.state.newDeptId,enterpriseUserIds:e.key}\r\n            })\r\n            this.appointFn(staff)\r\n        }else if(this.state.newDeptId!=='' && this.props.activePerson){\r\n            //操作单个文件\r\n            this.appointFn([{newDeptId:this.state.newDeptId,enterpriseUserIds:this.props.activePerson.userId}])\r\n        }\r\n    }\r\n    appointFn(staff){\r\n        http.put('enterprise/user/move',staff).then(res=>{\r\n            if(res && res.status===200){\r\n                Modal.success({\r\n                    title: '系统提示',\r\n                    centered:true,\r\n                    content: '操作成功!',\r\n                })\r\n                this.props.toggleModalState('DEFAULT',false)\r\n                //制定部门之后如何刷新数据（操作selectedRowKeys）\r\n                this.props.selectedStaff([])\r\n                //指定部门之后刷新\r\n                this.props.getStaffList()\r\n            }\r\n        })\r\n    }\r\n    handleCancel(){\r\n       this.props.toggleModalState('DEFAULT',false)\r\n    }\r\n    onChange(e) {\r\n        this.setState({newDeptId:e.target.value})\r\n    }\r\n    render(){\r\n        return (\r\n            <Modal\r\n                width={300}\r\n                visible={true}\r\n                title=\"指定部门\" centered\r\n                onCancel={this.handleCancel}\r\n                footer={[\r\n                    <Button key='1'  onClick={this.handleCancel}>取消</Button>,\r\n                    <Button  key='2' type=\"primary\"  onClick={this.handleOk}>确认</Button>,\r\n                ]}\r\n                >\r\n                <div className=\"radio-wrapper\">\r\n                    <Radio.Group style={{ width: '100%' }} onChange={this.onChange}>\r\n                        {this.props.deptList?this.props.deptList.map(d=>{\r\n                            return <div className=\"radio-class\" key={d.departmentId}><Radio  value={d.departmentId}>{d.name}</Radio></div>\r\n                        }):null}\r\n                    </Radio.Group>\r\n                </div>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CDModal"],"sourceRoot":""}